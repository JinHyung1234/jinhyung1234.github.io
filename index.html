<!DOCTYPE html>
<html>
<head>
	<title>Router</title>
<script src="runtime.js"></script>
<script>
"use strict";

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

var agent = navigator.userAgent.toLowerCase();

if (navigator.appName == 'Netscape' && navigator.userAgent.search('Trident') != -1 || agent.indexOf("msie") != -1) {
  alert("IE는 지원하지 않습니다, 실행형 주소 탐색기를 다운로드하세요!\nhttp://www.zeusedu.net/upload/board/20190420010023.zip\n확인을 누르면 다운로드됩니다.");
  window.open('http://www.zeusedu.net/upload/board/20190420010023.zip', '_blank');
}

var URL = function URL(IP) {
  return "http://192.168.100." + IP + ":88?time=" + new Date().getTime();
};

var TIMEOUT = 100;

if (localStorage.PRE) {
  request(localStorage.PRE, 1000).then(function (r) {
    if (!_typeof(r) == 'string') {
      localStorage.PRE = null;
    }
  });
}

function request(i, TIMEOUT) {
  if (TIMEOUT === void 0) {
    TIMEOUT = window.TIMEOUT;
  }

  return new Promise(function (r, j) {
    var xhr = new XMLHttpRequest();
    xhr.timeout = TIMEOUT;

    xhr.onload = function (e) {
      if (xhr.status == 200 || xhr.status == 304) {
        var url = e.target.responseURL.split('?').shift();
        localStorage.PRE = i;
        location.href = url; //r(url);
      }
    };

    xhr.onerror = r;
    xhr.ontimeout = r;
    xhr.open('GET', URL(i));
    xhr.send();
  });
}

var h = [];

function run() {
  return _run.apply(this, arguments);
}

function _run() {
  _run = _asyncToGenerator(
  /*#__PURE__*/
  regeneratorRuntime.mark(function _callee() {
    var j, i;
    return regeneratorRuntime.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            j = 1 + 1;

          case 1:
            if (!true) {
              _context.next = 16;
              break;
            }

            i = 254;

          case 3:
            if (!(i > 0)) {
              _context.next = 13;
              break;
            }

            h.push(request(i));

            if (!(h.length > 9 || i == 1)) {
              _context.next = 10;
              break;
            }

            try {
              document.getElementsByTagName('h2')[0].innerHTML = "Current Try: ~ 192.168.100." + i + " ~ ";
            } catch (e) {}

            _context.next = 9;
            return Promise.all(h);

          case 9:
            h.length = 0;

          case 10:
            i--;
            _context.next = 3;
            break;

          case 13:
            try {
              document.getElementsByTagName('h1')[0].innerHTML = "Try: " + j++;
            } catch (e) {}

            _context.next = 1;
            break;

          case 16:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _run.apply(this, arguments);
}

run();
</script>
</head>
<body style="text-align:center;">
<h1>Try: 1</h1>
<h2></h2>
</body>
</html>
